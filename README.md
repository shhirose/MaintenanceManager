# メンテナンス管理（EC-CUBE 3系）
.htaccess を触らずに、ボタン一つでメンテナンス画面を表示することができます。

メンテナンス画面はテンプレートファイルではなく、HTML ファイルを生成しますので、データベースを停止するようなメンテナンスの場合にも、Web サーバーが動作していれば表示することができます。


## 使い方
「設定 > システム情報設定 > メンテナンス管理」から設定できます。

### 設定
メンテナンス用HTMLの内容に、メンテナンス中に表示する画面の HTML を記載します。
ここの記載にはページ編集と同じ Twig での記載（`{{ }}`）が可能です。

登録後、maintenance.html ファイルが html ディレクトリの下に配置されますので、直接URLを叩けば画面を確認することができます。


### メンテナンス状態への移行
状態を「有効」にして更新ボタンをクリックしてください。

※EC-CUBE のインストール時に設定する「管理画面へのアクセス制限」を除外してメンテナンス画面を表示します。

　**アクセス制限をかけていない場合**は、復旧する際に .htaccess のリネーム作業が必要になります。


### 通常状態への移行
状態を「無効」にして更新ボタンをクリックしてください。

管理画面のアクセス制限をかけていない場合は、管理画面へもアクセスできませんので以下の手順で通常状態へ移行してください。

1. {EC-CUBE インストールディレクトリ}/html を表示

2. .htaccess ファイルを削除

3. .htaccess.mm_copy ファイルを .htaccess に名前変更


Windows
``` bat
rename .htaccess.mm_copy .htaccess
```

Linux
``` sh
mv .htaccess.mm_copy .htaccess
```
